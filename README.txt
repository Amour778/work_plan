****此前端框架的一些设定：
****1.每个页面的每个控件，如果有ID 或者 按钮的"data-method" 表格的"lay-filter"及其按钮控件(就是写在script里面的那些控件)的script ID 等等等等 ，必须为唯一！必须为唯一！必须为唯一！
****2.为了配合table的行内按钮取值赋值给弹出页面，在static/module/admin.js 写了一个方法,详细的可以去找setTableBtnInfo getTableBtnInfo
****官网：https://whvse.gitee.io/easywebpage/docs/#/?id=easyweb-%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E6%96%87%E6%A1%A3

2018年9月19日15:18:17
	1.将菜单权限也统一到Role表中，通过角色进行统一管理
	···之后的安排：将相关页面及逻辑功能做出来
	1.用户
	2.角色
	3.权限
	
2018年9月30日16:30:07
已完成
	1.用户增删查改导的操作，并完成赋予角色
	2.角色增删查改的操作，并完成修改角色权限
	3.权限增删查改的操作
	4.导入支持 xls 和 xlsx 格式 （用户界面）
	

	···之后的安排：
	1.用户修改自己的密码等信息
	2.导出数据(实现方法其实已经有了com.workplan.upload.download-->ExportExcelWrapper.java，只是没有跟前端页面进行操作实现)
	3.导入或重置用户密码时，发短信给用户，告知用户由系统自动生成的复杂新密码，而非当前的固定密码
	4.当前用户未操作导致连接超时时，用户再次操作数据时，先弹窗告知用户再次登陆，然后继续上次用户想要进行的操作。例如：用户点击“添加用户”按钮，但是因连接超时，故此时应该是弹出登陆界面，用户登陆后，自动进入“添加用户”界面

	
2018年11月21日15:34:34
笔记：
	WebRoot\WEB-INF\pages\function_page：框架外用户界面
	WebRoot\WEB-INF\pages\static\pages：框架外用户js
	
2018年11月30日15:57:35
已完成(对应上面的需求2018年9月30日16:30:07)
	1.用户修改自己的密码等信息
	2.已完成
	3.添加用户、批量添加用户、重置用户密码的操作，密码都已短信形式发送给用户(此处涉及到短信模板SendShortMessage.Java，可以看info.properties了解详情)
	4.---此需求暂不做

修复：
	1.部署项目到服务器后页面打开缓慢的问题
		添加授权信息缓存，使用的shiro自带的cache
		<bean id = "shiroSpringCacheManager" class="org.apache.shiro.cache.MemoryConstrainedCacheManager"/>
		<bean id="securityManager" class="org.apache.shiro.web.mgt.DefaultWebSecurityManager">
			...
	         <!--将缓存管理器，交给安全管理器-->
	        <property name="cacheManager" ref="shiroSpringCacheManager"/>
		</bean>
		
2018年12月18日18:00:21
已完成
	1.导出二级事项具体内容(未对一级事项名称进行合并单元格，但是是按照一级事项的ID做的排序)
	2.登陆日志功能添加，记录登陆的工号，IP，登陆时间
	3.页面控件布局统一化：
		<div class="layui-card">
		    <div class="layui-card-header">
		        <h2 class="header-title">模板下载</h2>
		        <span class="layui-breadcrumb pull-right">
		          <a href="#!home_console">首页</a>
		          <a><cite>模板下载</cite></a>
		        </span>
		    </div>
			<div class="layui-card-body">
			    <div class="layui-form toolbar">输入框、按钮布局</div>
				<table id="templets_demo" lay-filter="templets_test"></table>
			</div>
	    </div>

2018年12月23日13:19:49
已完成
	新增
	1.二级事项单页显示详情
	2.修改二级事项内容
	3.二级事项搜索框添加二级内容
	4.超时提醒：MYSQL搜索条件：用户工号是该事项的责任人或配合人，且事项状态不为1(已完成)，且预计完成日期符合条件日期
	  info.properties配置
		#盛海工作全景：提前多久提醒用户事件即将过期。单位：天。获取当前日期后一天：select date_sub(curdate(),interval -1 day)
		#WHERE completion_time BETWEEN curdate()  AND date_sub(curdate(), INTERVAL ? DAY)
		completion_time=-1
		#盛海工作全景：时间过期多久提醒用户事件已经过期。单位：天
		#WHERE completion_time < curdate()
		completion_time_timeout=1
	
	修改
	1.新增或修改二级事项，会短信通知到责任人和配合人(之前是只通知到责任人)；二级事项名称改为必填项
	2.添加/更新步骤界面，选择工作内容后，会获取到已有数据
	3.二级事项内容的负责人和配合人改为工号(之前记录的是名字)

修复
	1.二级事项搜索时的数据获取异常
	
	
2019年1月7日14:00:58
修复
	1.二级事项搜索时，配合人不存在导致的数据无法正常返回的问题

已完成
	新增
	1.如果负责人和配合人为同一个人，则只发送一条短信
	修改
	1.新增二级事项时，因短信平台API限制：变量参数超出长度限制(20个字符)，故限制二级事项名称长度为20个字符
	2.添加/更新步骤时，下拉框从“一级事项-工作内容”变更为“二级事项-工作内容”
	
已知BUG
	1.事项过期提醒功能，在IE和谷歌浏览器显示的数据不同，且两者都不完整
	----------------------------------2019年1月17日11:38:25后记：此BUG其实不是BUG，而是MYSQL语句的条件：负责人和配合人包含登陆用户。

	
2019年1月25日15:00:08
【微信小程序：易点租信息收集】V0.0.2
已完成
	1.用户打开小程序时，会对用户微信的OPENID进行工号是否绑定的验证，未绑定则告知用户绑定，绑定过则直接跳转到主界面。
	2.主界面：
		用户拍摄或选择照片，拍摄完成或选择完成后，自动上传的服务器(WEB-INF/WeChat_Files_Upload/)，并回显图片，可对图片进行删除。并将图片的值添加到hidden状态下的input中，用于后续上传数据库使用(保存的图片名称直接取微信生成的。)
		选择相应的上门类型，并填写信息
		提交数据
	3.网页中可查看提交的数据和图片：wechat_edianzu_information_gathering.jsp
	
	
	
2019年2月2日17:54:41
【微信小程序：易点租信息收集】V0.0.3版本对应后台
已完成
	{小程序}
	1.添加历史记录功能，查询最近10条上传记录或根据日期查询历史记录
	2.小程序可删除或修改历史记录
	3.添加通过关键字搜索地址的功能
	{WEB}
	1.查看图片时，添加时间后缀避免图片缓存问题导致的更新不及时

【弱电项目】
已修复
	1.普通用户(特指用户角色为wck_per_user的用户)可以看到其他用户提报内容的问题
	
已完成
	1.立项内容备份处理，在立项界面，可看到用户最初的立项内容和当前立项的内容，不同之处会标红加粗显示
	2.用户修改立项内容时做了区别判断：
		一、如果审批状态为“1011立项审批通过”，则判断是否修改了钱相关的数据
		  	①如果没有修改钱相关的数据，则不更改审批状态
		  	②如果修改了钱相关的数据，则更改审核状态为1010
	 	二、如果审批状态不为“1011立项审批通过”，则更改审核状态为1010
未完成：
	1.撤项：撤项要求删除除了立项界面数据之外的所有相关数据，立项界面数据显示"已撤项"
	2.删除成本报销---暂时不做
	3.修改成本报销内容时，没有显示旧数据
	4.按钮的图标
	
2019年2月11日18:03:02
【弱电项目】
已完成
	1.修改成本报销内容时，没有显示旧数据
	2.按钮的图标
	3.将表格的操作按钮集成到一个按钮上
	4.修改成本报销内容时，可以显示旧数据
未完成：
	1.撤项：撤项要求删除除了立项界面之外的所有相关数据，立项界面数据显示"已撤项"
	2.查看用户上传的项目文件
待测试
	1.添加成本报销界面还需要进一步测试数据是否正确，可参考使用30%,30%,40%的分配方式分配
	2.修改成本报销界面还需要进一步测试数据是否正确
	
2019年2月12日18:11:40
【弱电项目】
已完成
	1.撤项
	2.项目总表：查看用户上传的项目相关文件并下载
	3.权限完善
待测试
	1.添加成本报销界面还需要进一步测试数据是否正确，可参考使用总金额19809.79，比例30%,30%,40%
	2.修改成本报销界面还需要进一步测试数据是否正确
待排查
	1.生产环境下使用超级管理员账号登陆时，获取项目总表数据会带上超级管理员账号(因给予了超级管理员账号弱电-普通立项用户wck_per_user角色，故此处无误)，但是却无法获取到正确的返回值
未完成：
	1.项目总表：查看上传的文件时，如果没有上传过，则会因为文件夹不存在导致数据异常

2019年2月13日09:36:27
【弱电项目】
已完成
	1.2019年2月12日18:11:40BUG修复
【微信小程序：易点租信息收集】V0.0.3版本对应后台
已完成
	1.导出数据

2019年2月14日14:34:07
已完成
	1."多标签"选项默认改为false：index.js中的"pageTabs"参数值
	2.修改密码出错的问题，没找到原因，故从之前的"登陆时保存用户密码，修改时对比两者的值"修改为"从数据库获取用户密码进行对比"
	
2019年3月5日11:28:51
已修复
	1.无法正常添加用户
	
【微信小程序：易点租信息收集】V0.0.3版本对应后台
已完成
	1.info.properties 添加参数wechat_edianzu_transcoding
	2.同步小程序功能--录入公司地址时，使用省市区下拉框。  网页系统添加该三个字段
	
2019年3月11日17:05:05
【微信小程序：易点租信息收集】V0.0.3版本对应后台
已修复
	1.绑定工号时，绑定的OPENID为"BIND"的问题
	
	
2019年4月13日13:20:50
【弱电项目】-第一次改进计划
要求：
	1).添加成本报销界面：必填项标星号
	2).报销审核
		添加预估：预估毛利	预估毛利%	预估净利润	预估净利%
		添加实际：实际毛利	实际毛利%	净利润	净利%
	3).总表添加：预估毛利	预估毛利%	预估净利润	预估净利% 四项内容
	4).审核通过后，总表：实际毛利	实际毛利%	净利润	净利%
	5).更新项目进度：
		①判断：代收金额/开票金额是否为5%	(开票金额=本金+税额 6~11%)
		②判断：开票金额与项目报价是否一致  
		③添加备注输入框，如果2不一致，则让其说明原因
	6).项目奖金分配：添加组成员，平摊占比金额，工号可与单人占比重复
	7).用户申请结项后，先由财务进行审核：是否回款，再由管理员审核
	8).个人奖金分配审核时，显示项目的所有内容
	9).项目结算申请表  导出  包括：地区	工号	姓名	比例	金额			
	10).新增立项内容	
		项目区部(华东，华北...)，项目负责人一栏，由下拉选择
		项目负责人数据由人资管理
		预计完成   项目周期     非必填
		税率 3  6  9  (10) 13  (16)
	11).报销时是否是最后一次报销
	12).立项界面，添加
		①.材料下面增加“可开票增专金额”，人工下面增加“普票金额”
		②.增加供应商开票税率(3,6,9,10,13,16)，供应商发票抵税金额 =可开票增专金额 /(1+供应商开票税率)*供应商开票税率
		③.预估毛利=税价全额-人工材料费用小计-管理费及税务小计
						        人工材料费用小计=可开票增专金额+普票金额+其他项-供应商开票抵税金额
		      预估毛利%=预估毛利/税价全额
		      预估净利润=预估毛利*0.75
		      预估净利%=预估毛利/税价全额
	13).计算公式变更：从【人工材料费用小计=材料费(含税)+外包人工费、水电(含税)+运杂费+工具固定资产分摊+招待-抵税金额(增值税专用发票)】变更为
			【人工材料费用小计=材料费(含税)+外包人工费、水电(含税)+运杂费+工具固定资产分摊+招待】,去掉[-抵税金额(增值税专用发票)]
	
已完成新增内容的改进：(10)
	
2019年4月22日17:10:28
【弱电项目】-第一次改进计划
已完成新增内容的改进：(10)，(11)

2019年4月23日18:07:22
【弱电项目】-第一次改进计划
已完成新增内容的改进：(10)，(11)，(6需完善溢出和缺损资金)

2019年4月25日15:18:12
【弱电项目】-第一次改进计划
已完成新增内容的改进：(10)，(11)，(6已完善溢出和缺损资金，溢出和缺损资金都由责任人-由工号判定-承担)，(7)

发现的问题：
	1.项目奖金分配完毕，窗口自动关闭后，下拉选择的内容还在，但是却提示"必填项不能为空"。但是单纯的点开奖金分配窗口然后关闭，是可以正常搜索的

	
2019年4月29日17:38:11
【弱电项目】-第一次改进计划
已完成新增内容的改进：(10)，(11)，(6)，(7)，(3)，(8)


2019年5月5日19:39:45
【弱电项目】-第一次改进计划
已完成新增内容的改进：(2)，(3)，(4)，(5)，(6)，(7)，(8)，(10)，(11)，(12)，(13)
不需要做：
(1)已经有必填的弹窗提示，放弃此需求
(9)沟通有误，实际是指奖金分配时需要用户填写比例
需要添加的内容：
1.报销审核时，判断用户是否存在修改了立项内容并且没有通过的情况，如果存在，则不给予审核
2.上传文件的删除：可以考虑如下操作：获取最新的相关文件名的方式，获取完整的文件名，删除文件

2019年5月6日17:26:28
【弱电项目】-第一次改进计划
?1.奖金分配-小组分配界面，偶现输入框无法输入的问题，点击“清空”按钮即可
√2.申请结项：备注输入框必填问题
√3.申请结项时未审批结束的报销没有搜索出来
?4.项目奖金分配完毕，窗口自动关闭后，下拉选择的内容还在，但是却提示"必填项不能为空"。但是单纯的点开奖金分配窗口然后关闭，是可以正常搜索的
√5.报销审核时，判断用户是否存在修改了立项内容并且没有通过的情况，如果存在，则不给予审核


2019年5月13日14:09:16
【弱电项目】-第二次改进计划：※表示优先开发
1※立项增专的金额可以为0
2※审批节点记录
3.流程审批使用流程引擎进行规范
4※立项数据修改后，相关数据需要修改
5※质保金回款提醒
6※审批时判断审批状态
7.实际开支以组的方式展示
8※根据用户提交的实际开支，自动填充报销单，审批完成后自动填充审批记录区，可打印
9.审批事项邮件提醒
10.公式参数可由用户变更，使其更加灵活
11.单点登录，已经登录的用户将被顶掉
12※修改流程时，需要填写原因
13※禁止表单重复提交
14※添加借款功能
15※添加提前付款申请
16※添加开票申请功能
17※添加红冲功能

2019年5月14日18:04:11
【弱电项目】-第二次改进计划
5※质保金回款提醒-完成：主页界面，后台条件：
	用户为财务
	* @param StartDate 当天日期
	* @param EndDate 当天日期往后N天
	或地区负责人ruod
	* @param StartDate 当天日期
	* @param EndDate 当天日期往后N天
	* @param project_area_department 用户所属大区
	或普通用户
	* @param StartDate 当天日期往前N天
	* @param EndDate 当天日期
	* @param personal 所属责任人/提交人

2019年5月23日18:01:16
1.审批节点记录已经完成了：立项和实际开支
2.实际开支界面修改为以组进行区分。每次提交的实际开支为1组


2019年5月27日12:08:03
配合SVN进行版本控制

2019年6月12日11:37:29
【弱电项目】-第二次改进计划
已完成：
1※立项增专的金额可以为0
2※审批节点记录
4※立项数据修改后，相关数据需要修改
5※质保金回款提醒
6※审批时判断审批状态
7.实际开支以组的方式展示
12※修改流程时，需要填写原因


2019年6月18日15:33:06
【弱电项目】-第二次改进计划
已完成：
1※立项增专的金额可以为0
2※审批节点记录
4※立项数据修改后，相关数据需要修改
5※质保金回款提醒
6※审批时判断审批状态
7.实际开支以组的方式展示
12※修改流程时，需要填写原因
13※禁止表单重复提交：前端禁止。配合admin.js中定义的ajax方法，在提交数据时，禁用layui-btn样式，success后，去掉禁用

2019年6月20日17:58:44
1、修改上传文件的位置。将上传文件和进度更新分离。上传文件与已上传文件界面整合

2019年6月28日15:01:49
8※：自动填充报销单的几个点
1：用户手动填写，不需要保留
2：报销组为单位打印一张报销单
3：成本事项按系统来，添加一项市内交通费，差旅费-交通费
4：用户手动填写


2019年7月22日18:00:20
1.通过jdbcTemplate.batchUpdate(sql)技术，修改立项的数据写入数据库方法。邮件和数据没有做核对

2019年7月26日17:28:00
1、提前付款申请：基础功能完成，提交的数据写入到项目总表的"已收款金额received_amount"。申请部门、费用所属部门、已付款金额、合同应付款总额应该由项目编号获取detail表数据自动填充

2019年8月1日15:16:05
【弱电项目】-第二次改进计划
1※立项增专的金额可以为0
2※审批节点记录
3.流程审批使用流程引擎进行规范
4※立项数据修改后，相关数据需要修改
5※质保金回款提醒
6※审批时判断审批状态
7.实际开支以组的方式展示
8※根据用户提交的实际开支，自动填充报销单，审批完成后自动填充审批记录区，可打印
9.审批事项邮件提醒
10.公式参数可由用户变更，使其更加灵活
11.单点登录，已经登录的用户将被顶掉
12※修改流程时，需要填写原因
13※禁止表单重复提交
14※添加借款功能
15※添加提前付款申请
16※添加开票申请功能
17※添加红冲功能
已完成：1.2.4.5.6.7.8.9.12.13.15.16
对之后可能会发生变更的参数，从代码写死改为从数据库获取

2019年8月6日14:57:40
admin.js添加数字转中文大写方法numberToCapital(number)
【弱电项目】-第二次改进计划
√1※立项增专的金额可以为0
√2※审批节点记录
3.流程审批使用流程引擎进行规范
√4※立项数据修改后，相关数据需要修改
√5※质保金回款提醒
√6※审批时判断审批状态
√7.实际开支以组的方式展示
√8※根据用户提交的实际开支，自动填充报销单，审批完成后自动填充审批记录区，可打印
√9.审批事项邮件提醒
10.公式参数可由用户变更，使其更加灵活
11.单点登录，已经登录的用户将被顶掉
√12※修改流程时，需要填写原因
√13※禁止表单重复提交
14※添加借款功能
√15※添加提前付款申请
√16※添加开票申请功能
17※添加红冲功能
√18※对之后可能会发生变更的参数(比如下拉框内容)，从代码写死改为从数据库获取



2019年8月9日11:08:24
开始进行Code Review